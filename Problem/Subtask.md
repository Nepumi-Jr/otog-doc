# คู่มือสำหรับการเพิ่ม/แก้ไข กลุ่มทดสอบ

## กลุ่มทดสอบคืออะไร

กลุ่มทดสอบ(หรือ กลุ่มเทสเคส)คือการนำบททดสอบ (`Test case`)ต่าง ๆ มารวมกันออกเป็นกลุ่ม ๆ เพื่อที่จะสามารถปรับน้ำหนักหรือสร้างเงื่อนไขของแต่ละกลุ่มได้ เช่น โจทย์ข้อนี้มี `10` เทสเคส แล้วทำการแบ่งออกเป็นสามกลุ่ม กลุ่มแรกเป็น เทสเคส `1 2` กลุ่มที่สองเป็น `3 4 5` และกลุ่มสุดท้ายเป็น `6 7 8 9 และ 10` เป็นต้น

ในแต่ละกลุ่มจะสามารถตั้งค่าได้ดังนี้

- **น้ำหนัก**
  ก็คือกำหนดน้ำหนักของกลุ่มนี้ ถ้าหากผู้ทำโจทย์สามารถผ่านทุก ๆ เทสเคสในกลุ่มนั้น ก็จะได้คะแนนเป็นไปตามน้ำหนักที่กำหนดไว้ หากผ่านแค่บางส่วน ก็จะได้คะแนนบางส่วนตามจำนวนเทสเคสและน้ำหนัก เช่นหากมีน้ำหนักเป็น `35` แล้วในกลุ่มนั้นมี `5` เทสเคสและผ่านแค่ `3` เทสเคสก็จะได้คะแนนเป็น `3/5×35 = 21` คะแนน เว้นแต่ในกรณีถัดมา

- **การมัดเทสเคส**
  คือการกำหนดเงื่อนไขของการได้คะแนนของกลุ่มนั้น ๆ หากมัดเคส(เป็นจริง) ผู้ทำโจทย์จะได้คะแนนเมื่อผ่านทุก ๆ เทสเคสของกลุ่มดังกล่าว หากไม่ผ่านแม้แต่หนึ่งเทสเคส ก็จะได้ `0` คะแนนจากกลุ่มเคสนั้น หากไม่มัดก็จะใช้การคำนวณปกติเหมือนเดิม
- **การกำหนด Requirement**
  อย่างในบ้างข้อ อาจจะมีการแบ่งเป็นกลุ่มเทสเคสที่มีข้อมูลเล็ก ๆ และข้อมูลใหญ่ ๆ การที่ผู้ทำโจทย์ยังไม่ผ่านกับกลุ่มเล็ก ๆ มาก่อน ก็จะไม่ควรที่จะตรวจกับกลุ่มข้อมูลใหญ่ ๆ เช่นกัน ซึ่งผู้แต่งโจทย์ก็สามารถกำหนดว่า การที่จะตรวจกลุ่มนี้ จะต้องผ่านกลุ่มไหนมาก่อน หากผู้ส่งไม่ผ่านตามที่กำหนดไว้ ตัวตรวจจะทำการข้ามการตรวจกลุ่มนี้ทันที ซึ่งได้ผลตรวจเป็น `S` _(Skip)_ และไม่ได้คะแนนในกลุ่มนั้น

## รูปแบบการตั้งค่า

จะใช้รูปแบบ _Almost-JSON_ ในการเก็บข้อมูลกลุ่มทดสอบ ซึ่งมีรูปแบบตัวอย่างดังต่อไปนี้

```json
{
  "testList": "[1,2][3,4,5][6,7,8,9,10]",
  "options": {
    "1": {
      "group": false,
      "score": 30
    },
    "2": {
      "group": true,
      "score": 70,
      "require": 1
    },
    "3": {
      "group": false,
      "score": 70,
      "require": [1, 2]
    }
  }
}
```

จากตัวอย่างจะแบ่งออกเป็นสองส่วนคือ

- **testList (รับเป็น string)**
  เป็นการกำหนดว่าเทสเคสไหนอยู่กลุ่มไหนบ้าง โดยใช้สัญลักษณ์ `[]` แยกออกเป็นกลุ่มต่าง ๆ
- **options**
  คือการกำหนดน้ำหนักหรือเงื่อนไขเพิ่มเติม หากไม่กำหนดจะใช้ค่าแรกเริ่มของการตั้งค่าแต่ละอัน โดยใน options ก็สามารถใช้ตัวเลขแทนหมายเลขกลุ่ม เพื่อที่จะสร้างเงื่อนไขของกลุ่มนั้น ๆ โดยที่จะให้กลุ่มแรก(ซ้าย)สุด เป็นกลุ่มที่ 1
  - score คือน้ำหนักคะแนน ใช้ข้อมูลเป็น `จำนวนจริง`
    _(มีค่าเริ่มต้นเป็น จำนวนเทสเคสในกลุ่มนั้น)_
  - group คือการมัดเทสเคส ใช้ข้อมูลเป็น `Boolean`
    _(มีค่าเริ่มต้นเป็นจริง)_
  - require คือการกำหนด Requirement ใช้ข้อมูลเป็นจำนวน`เต็มบวก` หรือเป็น `list` _(มีค่าเริ่มต้นเป็น [] )_

### ตัวอย่าง

```json
   {
    "testList": "[1,2][3,4,5][6,7,8][9,10,11,12]",
    "options" : {
        1 : {
            "group": false,
            "score": 20
        },
        2 : {
            "group": true,
            "score": 30,
        },
        3 : {
            "group": true,
            "score": 50,
            "require" : 2
        },
        4 : {
            "group": true,
            "score": 50,
            "require" : [1,3]
        },
    }
```

สามารถอธิบายได้ภาพดังนี้...

![ตัวอย่างภาพ](/res/Subtask/Example.png)

| ผลตรวจก่อนการตรวจแบบกลุ่ม | ผลตรวจหลังการตรวจแบบกลุ่ม | คะแนน | คำอธิบาย                                                                                                                                             |
| ------------------------- | ------------------------- | ----- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| PPPPPPPPPPPP              | (PP)\[PPP]\[PPP]\[PPPP]   | 150   | ถูกหมดอยู่แล้ว                                                                                                                                       |
| PPPPPPPPPXP-              | (PP)\[PPP]\[PPP]\[PXP-]   | 100   | กลุ่มสุดท้ายดันมัดเคส ซึ่งก็จะไม่ได้คะแนนในส่วนนั้น                                                                                                  |
| PPPPPPPPTXTT              | (PP)\[PPP]\[PPP]\[TXTT]   | 100   | แม้ว่าจะผิดมากหรือผิดน้อยในกลุ่มสุดท้าย ก็มีค่าเท่ากัน                                                                                               |
| PPPPPP-P????              | (PP)\[PPP]\[P-P]\[SSSS]   | 50    | กลุ่มสามนั้นดันมัดเคส จึงทำให้ไม่ได้คะแนน และกลุ่มสุดท้าย ดันมีข้อกำหนดคือต้องผ่านกลุ่มสามก่อน ซึ่งทำให้กลุ่มสุดท้ายโดนข้ามบททดสอบ                   |
| PTPPPPPP????              | (PT)\[PPP]\[PPP]\[SSSS]   | 90    | กลุ่มแรกผลาดแค่หนึ่งเทสเคส ซึ่งได้คะแนนเป็น 1/2×20=10คะแนน และเหมือนกันกับด้านบน ในกลุ่มสุดท้ายมีข้อกำหนดว่าต้องผ่านกลุ่มแรกก่อน จึงทำการข้ามบททดสอบ |
| PPP-P???????              | (PP)\[P-P]\[SSS]\[SSSS]   | 20    | -                                                                                                                                                    |
| TT--P???????              | (TT)\[--P]\[SSS]\[SSSS]   | 0     | -                                                                                                                                                    |
| XPPXT???????              | (XP)\[PXT]\[SSS]\[SSSS]   | 10    | -                                                                                                                                                    |
